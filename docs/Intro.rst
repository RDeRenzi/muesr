Basic theory
====================

Local fields in MuSR
---------------------

Muon spin rotation and relaxation spectroscopy is mainly used to probe magnetic materials.
We briefly describe here the interactions involved between the muon and the electrons.

[TODO]

.. _intro_description_of_magnetic_structures:

Description of Magnetic Structures
-----------------------------------

There are two possibilities to describe a magnetic structure: using the
colored group theory or with the propagation vector and Fourier 
coefficients formalism. :mod:`muesr` opts for the latter.
A magnetic structure is defined as

.. math::

   \mathbf{\mu_{n \nu}} = \sum _{\mathbf{k}} \mathbf{m}_{\nu \mathbf{k}} e ^{- 2 \pi i \mathbf{k} \cdot \mathbf{R}_n}
   
where :math:`\nu` runs over the atoms of the unit cell and :math:`n` 
identifies the n-th cell where atomic positions :math:`\mathbf{R}_{n\nu}` 
are obtained according to

.. math::

   \mathbf{R}_{n\nu} = \mathbf{R}_{n} + \mathbf{r_\nu}
   
with :math:`\mathbf{R}_{n} = n_a \mathbf{a} + n_b \mathbf{b} + n_c \mathbf{c}` 
and :math:`\mathbf{r}_\nu = x_\nu \mathbf{a} + y_\nu \mathbf{b} + z_\nu \mathbf{c}`.

The fourier coefficients :math:`m_{\nu \mathbf{k}}` are three dimensional
complex vectors. They are related to the  irreducible representations 
of the so called "little groups" i.e. the subgroup of the crystallographic space 
group formed by the operators leaving invariant the propagation vector.



[TODO] Discuss the phase!


:mod:`muesr` can only handle 1-k magnetic structures.
However, since local field are linear in the magnetic moment, the
results for multiple-k magnetic orders can be obtained by performing 
multiple simulations for each of the k vectors describing the system
and summing the results.

Implementation details
----------------------------

:mod:`muesr` is a tool to analyze muon sites and local field contributions
generated by a known magnetic structure. It is intended to be used in an 
interactive python environment such as `IPython <http://ipython.org>`_ or `Jupyter <http://jupyter.org>`_ notebooks.

Internally, muesr uses Tesla units and Angstrom for lengths if not 
specified. Magnetic moments are specified in units of Bohr magnetons.


